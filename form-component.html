<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-input/paper-input-container.html">
<link rel="import" href="../paper-input/paper-input-error.html">

<!--
An element for registration forms.

Example:

    <form-component></form-component>

@demo
-->
<dom-module id="form-component">
    <style></style>

    <template>
        <div>
            <paper-input type="password"
                         label="{{passwordLabel}}"
                         id="password"
                         pattern="^.{8,32}$"
                         error-message="Password need to be longer than 8"
                         maxlength="32"
                         char-counter
                         autofocus
                         auto-validate>
            </paper-input>
        </div>
        <div>
            <paper-input type="password"
                   id="passwordConfirmation"
                   label="{{passwordConfirmationLabel}}"
                   error-message="Passwords are not identical">
            </paper-input>
        </div>
        <paper-button id="submit" on-click="_submitForm" raised>
            Submit!
        </paper-button>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'form-component',
        properties: {
            passwordLabel: {
                type: String,
                value: "Password"
            },
            passwordConfirmationLabel: {
                type: String,
                value: "Confirm your password"
            }
        },
        _submitForm: function(){
            var isProperlyConfirmed = this.$.password.value == this.$.passwordConfirmation.value;
            var isPasswordValid = isProperlyConfirmed && !this.$.password.invalid && this.$.password.value.length >= 8;
            this._validatePasswordConfirmation(isProperlyConfirmed);

            if(isPasswordValid){
                alert("Succescfully submitted form!")
            } else{
                alert("Something gone wrong :(")
            }
        },

        _validatePasswordConfirmation: function(isProperlyConfirmed){
            if (isProperlyConfirmed){
                this.$.passwordConfirmation.invalid = false;
            }else{
                this.$.passwordConfirmation.invalid = true;
            }
        },

        // Element Lifecycle

        ready: function() {
        },

        attached: function() {},

        detached: function() {}

    });
</script>
